"use strict";const donationButtons=document.getElementsByClassName("donation-button"),generalPage=document.getElementById("general");function hideAllPages(){var e=document.getElementsByClassName("start__link");Array.from(e).forEach(e=>{e=e.getAttribute("data-nav");document.getElementById(""+e).classList.add(e+"--hide"),document.getElementById(""+e).classList.remove(e+"--show")})}function menuPageHideAndShowDonationPage(){var e=document.querySelectorAll(".nav__link");Array.from(e).forEach(e=>{e.classList.remove("nav__link--active"),"general"===e.getAttribute("data-item")&&e.classList.add("nav__link--active")}),generalPage.classList.remove("general--hide"),generalPage.classList.add("general--show"),menuPage.classList.add("start--hide")}function handleButtonClick(){hideAllPages(),menuPageHideAndShowDonationPage()}Array.from(donationButtons).forEach(e=>{e.addEventListener("click",handleButtonClick)});let flat=null,accessoryType=null,buyerData=null;const form=document.querySelector(".general__form"),flatType=document.querySelector(".flat-type"),flatTypeList=document.querySelector(".flat-type__list"),accessoryTypeList=document.querySelector(".accessory-type"),buyerPage=document.querySelector(".buyer"),thankYouPagePage=document.getElementById("thank-you-page"),certificatePage=document.querySelector(".certificate"),accessoriesСontent=document.querySelector(".accessory-type"),accessoriesItems=[...accessoriesСontent.children],flatAccessories=document.getElementById("accessories-flat"),balconyAccessories=document.getElementById("accessories-balcony"),terraceAccessories=document.getElementById("accessories-terrace"),buyerBackText=document.querySelector(".buyer__back-text"),donateSum=document.querySelector(".buyer__sum"),toDownloadButton=document.querySelector(".thank-you-page__download"),toCertificateButton=document.querySelector(".certificate__button");function resetValues(e,t){document.getElementById(e).value=t,flat=null,accessoryType=null,buyerData=null}function flatTypeVar(e){e.preventDefault();var t=e.target.value,a=+e.target.getAttribute("data-flat-price"),e=e.target.getAttribute("data-flat-placeholder");flat=t,flatType.classList.add("flat-type--hide"),donateSum.min=a,donateSum.setAttribute("placeholder",e),"flat"===flat?flatAccessories.classList.remove("accessories-styles--hide"):"balcony"===flat?balconyAccessories.classList.remove("accessories-styles--hide"):"terrace"===flat&&terraceAccessories.classList.remove("accessories-styles--hide")}function accessoriesTypeVar(e){e.preventDefault();var t=e.target.value;e.target.parentElement.classList.contains("accessories-styles__label")&&(accessoryType=t,buyerPage.classList.remove("buyer--hide"),accessoriesItems.forEach(e=>{e.classList.contains("accessories-styles--hide")||e.classList.add("accessories-styles--hide")}),buyerBackText.innerText=e.target.getAttribute("data-text")),e.target.classList.contains("back-button")&&(flat=null,flatType.classList.remove("flat-type--hide"),e.target.parentElement.classList.add("accessories-styles--hide"))}function backToAccessoriesType(e){if("submit"!==e.target.type&&(e.preventDefault(),e.target.classList.contains("buyer__img")))switch(accessoryType=null,buyerPage.classList.add("buyer--hide"),flat){case"flat":flatAccessories.classList.remove("accessories-styles--hide");break;case"balcony":balconyAccessories.classList.remove("accessories-styles--hide");break;case"terrace":terraceAccessories.classList.remove("accessories-styles--hide")}}function handleSubmit(e){e.preventDefault(),buyerData={name:document.getElementById("name").value,email:document.getElementById("email").value,text:document.getElementById("balconyText").value,donate:document.getElementById("donationAmount").value},buyerPage.classList.add("buyer--hide"),e.submitter.classList.contains("thank-you-page__download")||thankYouPagePage.classList.remove("thank-you-page--hide");var{name:e,email:t,text:a,donate:s}=buyerData;alert(`${e}, ваша покупка ${flat} + ${accessoryType} ${""!==a?a:""}, на сумму ${s}грн створена та очікує оплати. Ваша пошта `+t),resetValues("name",""),resetValues("email",""),resetValues("balconyText",""),resetValues("donationAmount","")}function toCertificatePage(e){e.target.classList.contains("thank-you-page__download")&&(thankYouPagePage.classList.add("thank-you-page--hide"),certificatePage.classList.remove("certificate--hide")),e.target.classList.contains("thank-you-page__to-flat")&&alert("перехід до кварти")}function downloadCertificate(e){alert("Тут має початись скачування сертифікату"),flatType.classList.remove("flat-type--hide"),certificatePage.classList.add("certificate--hide")}flatTypeList.addEventListener("click",flatTypeVar),accessoryTypeList.addEventListener("click",accessoriesTypeVar),buyerPage.addEventListener("click",backToAccessoriesType),thankYouPagePage.addEventListener("click",toCertificatePage),toCertificateButton.addEventListener("click",downloadCertificate),form.addEventListener("submit",handleSubmit);const list=document.querySelector(".start__list"),title=document.querySelectorAll(".start__link"),startPage=document.querySelector(".start"),generalPageMenu=document.getElementById("general"),menuLinks=document.querySelectorAll(".start__link"),menuLinksDesktop=document.querySelectorAll(".nav__link"),button=document.querySelector(".burger-menu__button"),back=document.querySelector(".burger-menu__back"),header=document.querySelector(".burger-menu__header"),burgerMenu=document.querySelector(".menu-content"),navigation=document.querySelector("nav"),menuPage=document.getElementById("start"),thankYouPage=document.querySelector(".thank-you-page");function hideNavElement(e,t){e.classList.remove(t+"--show")}function showElement(e){document.getElementById(e).classList.add(e+"--show")}function hideElements(e){document.getElementById(e).classList.remove(e+"--show"),document.getElementById("general").classList.remove("show__general__desktop")}function openMobileMenu(e){startPage.classList.remove("start--hide"),e.classList.remove("burger-menu__button--open"),e.classList.add("burger-menu__button--close"),header.classList.add("burger-menu__header--active"),burgerMenu.classList.remove("menu-content--hide")}function closeMobileMenu(e){e.classList.add("burger-menu__button--open"),e.classList.remove("burger-menu__button--close"),header.classList.remove("burger-menu__header--active"),burgerMenu.classList.add("menu-content--hide")}function backToNavigation(){button.classList.remove("burger-menu__button--hide"),back.classList.add("burger-menu__back--hide"),startPage.classList.remove("start--hide"),document.getElementById("general").classList.add("show__general__desktop"),Array.from(menuLinksDesktop).forEach(e=>{"general"!==e.getAttribute("data-item")?e.classList.remove("nav__link--active"):e.classList.add("nav__link--active")}),thankYouPage.classList.contains("thank-you-page--hide")||(thankYouPage.classList.add("thank-you-page--hide"),flatType.classList.remove("flat-type--hide")),certificatePage.classList.contains("certificate--hide")||(certificatePage.classList.add("certificate--hide"),flatType.classList.remove("flat-type--hide"))}function updateNavElements(a){Array.from(menuLinks).forEach(e=>{var e=e.getAttribute("data-nav"),t=document.getElementById(e);a(t,e)})}function activateLink(e){e.classList.add("nav__link--active"),startPage.classList.add("start--hide"),header.classList.add("burger-menu__header--active"),button.classList.add("burger-menu__button--hide"),button.classList.remove("burger-menu__button--open"),button.classList.add("burger-menu__button--close"),back.classList.remove("burger-menu__back--hide"),burgerMenu.classList.remove("menu-content--hide")}function deactivateLinks(e){Array.from(e).forEach(e=>{e.classList.remove("nav__link--active"),hideElements(e.getAttribute("data-item"))})}navigation.addEventListener("click",e=>{var t,e=e.target;e.classList.contains("nav__link")&&(deactivateLinks(document.querySelectorAll(".nav__link"),t=e.getAttribute("data-item")),showElement(t),activateLink(e))}),header.addEventListener("click",e=>{e=e.target;e.classList.contains("burger-menu__button--open")?(openMobileMenu(e),updateNavElements(hideNavElement)):e.classList.contains("burger-menu__button--close")?(closeMobileMenu(e),updateNavElements((e,t)=>{"general"!==t?hideNavElement(e,t):showElement(t)})):e.classList.contains("burger-menu__back")&&(backToNavigation(e),updateNavElements((e,t)=>{e.classList.remove(t+"--show",t+"--hide")}))}),Array.from(menuLinks).forEach(e=>{e.addEventListener("click",()=>{startPage.classList.add("start--hide");const t=e.getAttribute("data-nav");document.getElementById("general").classList.remove("show__general__desktop"),showElement(t),Array.from(menuLinksDesktop).forEach(e=>{e.getAttribute("data-item")===t?e.classList.add("nav__link--active"):e.classList.remove("nav__link--active")}),button.classList.add("burger-menu__button--hide"),back.classList.remove("burger-menu__back--hide")})}),window.onload=function(){document.getElementById("bottom").scrollIntoView(!0)};const terget=1e7,alreadyHave=document.querySelector(".purpose__bar").getAttribute("data-fill"),fillElement=document.querySelector(".purpose__fill"),countElement=document.querySelector(".purpose__count"),percentage=alreadyHave/(terget/100);fillElement.style.width=percentage+"%",countElement.textContent=alreadyHave+" / "+terget;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvbmF0aW9uQnV0dG9uLmpzIiwiZm9ybS5qcyIsIm1lbnUuanMiLCJzY3JvbGxUb0JvdHRvbS5qcyIsInRhcmdldC5qcyJdLCJuYW1lcyI6WyJkb25hdGlvbkJ1dHRvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZW5lcmFsUGFnZSIsImdldEVsZW1lbnRCeUlkIiwiaGlkZUFsbFBhZ2VzIiwibGV0IiwibmF2RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwiZWxlbWVudCIsImRhdGFBdHRyaWJ1dGVWYWx1ZSIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIm1lbnVQYWdlSGlkZUFuZFNob3dEb25hdGlvblBhZ2UiLCJtZW51TGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwibWVudVBhZ2UiLCJoYW5kbGVCdXR0b25DbGljayIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJmbGF0IiwiYWNjZXNzb3J5VHlwZSIsImJ1eWVyRGF0YSIsImZvcm0iLCJxdWVyeVNlbGVjdG9yIiwiZmxhdFR5cGUiLCJmbGF0VHlwZUxpc3QiLCJhY2Nlc3NvcnlUeXBlTGlzdCIsImJ1eWVyUGFnZSIsInRoYW5rWW91UGFnZVBhZ2UiLCJjZXJ0aWZpY2F0ZVBhZ2UiLCJhY2Nlc3Nvcmllc9Chb250ZW50IiwiYWNjZXNzb3JpZXNJdGVtcyIsImNoaWxkcmVuIiwiZmxhdEFjY2Vzc29yaWVzIiwiYmFsY29ueUFjY2Vzc29yaWVzIiwidGVycmFjZUFjY2Vzc29yaWVzIiwiYnV5ZXJCYWNrVGV4dCIsImRvbmF0ZVN1bSIsInRvRG93bmxvYWRCdXR0b24iLCJ0b0NlcnRpZmljYXRlQnV0dG9uIiwicmVzZXRWYWx1ZXMiLCJ2YWx1ZSIsImZsYXRUeXBlVmFyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImV2ZW50VGFyZ2V0VmFsdWUiLCJ0YXJnZXQiLCJmbGF0UHJpY2UiLCJmbGF0UGxhY2Vob2xkZXIiLCJtaW4iLCJzZXRBdHRyaWJ1dGUiLCJhY2Nlc3Nvcmllc1R5cGVWYXIiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJpdGVtIiwiaW5uZXJUZXh0IiwiYmFja1RvQWNjZXNzb3JpZXNUeXBlIiwidHlwZSIsImhhbmRsZVN1Ym1pdCIsIm5hbWUiLCJlbWFpbCIsInRleHQiLCJkb25hdGUiLCJzdWJtaXR0ZXIiLCJhbGVydCIsInRvQ2VydGlmaWNhdGVQYWdlIiwiZG93bmxvYWRDZXJ0aWZpY2F0ZSIsImxpc3QiLCJ0aXRsZSIsInN0YXJ0UGFnZSIsImdlbmVyYWxQYWdlTWVudSIsIm1lbnVMaW5rc0Rlc2t0b3AiLCJiYWNrIiwiaGVhZGVyIiwiYnVyZ2VyTWVudSIsIm5hdmlnYXRpb24iLCJ0aGFua1lvdVBhZ2UiLCJoaWRlTmF2RWxlbWVudCIsIm5hdkVsZW1lbnQiLCJuYXZFbGVtZW50QXR0cmlidXRlIiwic2hvd0VsZW1lbnQiLCJlbGVtZW50SWQiLCJoaWRlRWxlbWVudHMiLCJvcGVuTW9iaWxlTWVudSIsImNsb3NlTW9iaWxlTWVudSIsImJhY2tUb05hdmlnYXRpb24iLCJlbCIsInVwZGF0ZU5hdkVsZW1lbnRzIiwiYWN0aW9uIiwiYWN0aXZhdGVMaW5rIiwiZGVhY3RpdmF0ZUxpbmtzIiwidGFyZ2V0QXR0cmlidXRlIiwid2luZG93Iiwib25sb2FkIiwic2Nyb2xsSW50b1ZpZXciLCJ0ZXJnZXQiLCJhbHJlYWR5SGF2ZSIsImZpbGxFbGVtZW50IiwiY291bnRFbGVtZW50IiwicGVyY2VudGFnZSIsInN0eWxlIiwid2lkdGgiLCJ0ZXh0Q29udGVudCJdLCJtYXBwaW5ncyI6ImFBQUEsTUFBTUEsZ0JBQWtCQyxTQUFTQyx1QkFBdUIsaUJBQWlCLEVBQ25FQyxZQUFjRixTQUFTRyxlQUFlLFNBQVMsRUFFckQsU0FBU0MsZUFDTEMsSUFBSUMsRUFBY04sU0FBU0MsdUJBQXVCLGFBQWEsRUFDL0RNLE1BQU1DLEtBQUtGLENBQVcsRUFBRUcsUUFBU0MsSUFDekJDLEVBQXFCRCxFQUFRRSxhQUFh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LEtBQ2pDbUQsVUFBVTVELFVBQVVDLElBQUksYUFBYSxFQUNyQyxNQUFNcUUsRUFBc0JELEVBQVd0RSxhQUFhLFVBQVUsRUFDOURaLFNBQVNHLGVBQWUsU0FBUyxFQUFFVSxVQUFVRSxPQUFRLHdCQUF1QixFQUM1RXFFLFlBQVlELENBQW1CLEVBQy9CNUUsTUFBTUMsS0FBS21FLGdCQUFnQixFQUFFbEUsUUFBU2lGLElBQ0NBLEVBQUc5RSxhQUFhLFdBQVcsSUFDM0J1RSxFQUMvQk8sRUFBRzdFLFVBQVVDLElBQUksbUJBQW1CLEVBRXBDNEUsRUFBRzdFLFVBQVVFLE9BQU8sbUJBQW1CLENBRS9DLENBQUMsRUFDRE0sT0FBT1IsVUFBVUMsSUFBSSwyQkFBMkIsRUFDaEQ4RCxLQUFLL0QsVUFBVUUsT0FBTyx5QkFBeUIsQ0FDbkQsQ0FBQyxDQUNMLENBQUMsRUNuSkRpRixPQUFPQyxPQUFTLFdBQ1pqRyxTQUFTRyxlQUFlLFFBQVEsRUFBRStGLGVBQWUsQ0FBQSxDQUFJLENBQ3pELEVDRkEsTUFBTUMsT0FBUyxJQUNUQyxZQUFjcEcsU0FDakIyQixjQUFjLGVBQWUsRUFDN0JmLGFBQWEsV0FBVyxFQUNyQnlGLFlBQWNyRyxTQUFTMkIsY0FBYyxnQkFBZ0IsRUFDckQyRSxhQUFldEcsU0FBUzJCLGNBQWMsaUJBQWlCLEVBQ3ZENEUsV0FBYUgsYUFBZUQsT0FBUyxLQUMzQ0UsWUFBWUcsTUFBTUMsTUFBV0YsV0FBRixJQUMzQkQsYUFBYUksWUFBaUJOLFlBQUYsTUFBbUJEIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZG9uYXRpb25CdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRvbmF0aW9uLWJ1dHRvblwiKTtcbmNvbnN0IGdlbmVyYWxQYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZW5lcmFsXCIpO1xuXG5mdW5jdGlvbiBoaWRlQWxsUGFnZXMoKSB7XG4gICAgbGV0IG5hdkVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInN0YXJ0X19saW5rXCIpO1xuICAgIEFycmF5LmZyb20obmF2RWxlbWVudHMpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICAgICAgbGV0IGRhdGFBdHRyaWJ1dGVWYWx1ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1uYXZcIik7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2RhdGFBdHRyaWJ1dGVWYWx1ZX1gKS5jbGFzc0xpc3QuYWRkKGAke2RhdGFBdHRyaWJ1dGVWYWx1ZX0tLWhpZGVgKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7ZGF0YUF0dHJpYnV0ZVZhbHVlfWApLmNsYXNzTGlzdC5yZW1vdmUoYCR7ZGF0YUF0dHJpYnV0ZVZhbHVlfS0tc2hvd2ApO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBtZW51UGFnZUhpZGVBbmRTaG93RG9uYXRpb25QYWdlKCkge1xuICAgIGNvbnN0IG1lbnVMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmF2X19saW5rXCIpO1xuICAgIEFycmF5LmZyb20obWVudUxpbmtzKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fbGluay0tYWN0aXZlXCIpO1xuICAgICAgICBjb25zdCBuYXZFbGVtZW50QXR0cmlidXRlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWl0ZW1cIik7XG4gICAgICAgIGlmIChuYXZFbGVtZW50QXR0cmlidXRlID09PSBcImdlbmVyYWxcIikge1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibmF2X19saW5rLS1hY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBnZW5lcmFsUGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ2VuZXJhbC0taGlkZVwiKTtcbiAgICBnZW5lcmFsUGFnZS5jbGFzc0xpc3QuYWRkKFwiZ2VuZXJhbC0tc2hvd1wiKTtcbiAgICBtZW51UGFnZS5jbGFzc0xpc3QuYWRkKFwic3RhcnQtLWhpZGVcIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUJ1dHRvbkNsaWNrKCkge1xuICAgIGhpZGVBbGxQYWdlcygpO1xuICAgIG1lbnVQYWdlSGlkZUFuZFNob3dEb25hdGlvblBhZ2UoKTtcbn1cblxuQXJyYXkuZnJvbShkb25hdGlvbkJ1dHRvbnMpLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQnV0dG9uQ2xpY2spO1xufSk7XG4iLCJsZXQgZmxhdCA9IG51bGwsXG4gIGFjY2Vzc29yeVR5cGUgPSBudWxsLFxuICBidXllckRhdGEgPSBudWxsO1xuXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nZW5lcmFsX19mb3JtXCIpO1xuY29uc3QgZmxhdFR5cGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZsYXQtdHlwZVwiKTtcbmNvbnN0IGZsYXRUeXBlTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmxhdC10eXBlX19saXN0XCIpO1xuY29uc3QgYWNjZXNzb3J5VHlwZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY2Vzc29yeS10eXBlXCIpO1xuXG5jb25zdCBidXllclBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1eWVyXCIpO1xuY29uc3QgdGhhbmtZb3VQYWdlUGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGhhbmsteW91LXBhZ2VcIik7XG5jb25zdCBjZXJ0aWZpY2F0ZVBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNlcnRpZmljYXRlXCIpO1xuXG5jb25zdCBhY2Nlc3Nvcmllc9Chb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2Nlc3NvcnktdHlwZVwiKTtcbmNvbnN0IGFjY2Vzc29yaWVzSXRlbXMgPSBbLi4uYWNjZXNzb3JpZXPQoW9udGVudC5jaGlsZHJlbl07XG5cbmNvbnN0IGZsYXRBY2Nlc3NvcmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzb3JpZXMtZmxhdFwiKTtcbmNvbnN0IGJhbGNvbnlBY2Nlc3NvcmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzb3JpZXMtYmFsY29ueVwiKTtcbmNvbnN0IHRlcnJhY2VBY2Nlc3NvcmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzb3JpZXMtdGVycmFjZVwiKTtcblxuY29uc3QgYnV5ZXJCYWNrVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV5ZXJfX2JhY2stdGV4dFwiKTtcbmNvbnN0IGRvbmF0ZVN1bSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV5ZXJfX3N1bVwiKTtcblxuY29uc3QgdG9Eb3dubG9hZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGhhbmsteW91LXBhZ2VfX2Rvd25sb2FkXCIpO1xuY29uc3QgdG9DZXJ0aWZpY2F0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2VydGlmaWNhdGVfX2J1dHRvblwiKTtcblxuZnVuY3Rpb24gcmVzZXRWYWx1ZXMoZWxlbWVudCwgdmFsdWUpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudCkudmFsdWUgPSB2YWx1ZTtcbiAgZmxhdCA9IG51bGw7XG4gIGFjY2Vzc29yeVR5cGUgPSBudWxsO1xuICBidXllckRhdGEgPSBudWxsO1xufVxuXG5mdW5jdGlvbiBmbGF0VHlwZVZhcihldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBldmVudFRhcmdldFZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlO1xuICBjb25zdCBmbGF0UHJpY2UgPSArZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtZmxhdC1wcmljZVwiKTtcbiAgY29uc3QgZmxhdFBsYWNlaG9sZGVyID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtZmxhdC1wbGFjZWhvbGRlclwiKTtcblxuICBmbGF0ID0gZXZlbnRUYXJnZXRWYWx1ZTtcbiAgZmxhdFR5cGUuY2xhc3NMaXN0LmFkZChcImZsYXQtdHlwZS0taGlkZVwiKTtcbiAgZG9uYXRlU3VtLm1pbiA9IGZsYXRQcmljZTtcbiAgZG9uYXRlU3VtLnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIGZsYXRQbGFjZWhvbGRlcik7XG4gIGlmIChmbGF0ID09PSBcImZsYXRcIikge1xuICAgIGZsYXRBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xuICB9IGVsc2UgaWYgKGZsYXQgPT09IFwiYmFsY29ueVwiKSB7XG4gICAgYmFsY29ueUFjY2Vzc29yaWVzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY2Nlc3Nvcmllcy1zdHlsZXMtLWhpZGVcIik7XG4gIH0gZWxzZSBpZiAoZmxhdCA9PT0gXCJ0ZXJyYWNlXCIpIHtcbiAgICB0ZXJyYWNlQWNjZXNzb3JpZXMuY2xhc3NMaXN0LnJlbW92ZShcImFjY2Vzc29yaWVzLXN0eWxlcy0taGlkZVwiKTtcbiAgfVxufVxuZnVuY3Rpb24gYWNjZXNzb3JpZXNUeXBlVmFyKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IGV2ZW50VGFyZ2V0VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XG4gIGNvbnN0IGV2ZW50VGFyZ2V0UGFyZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gIGlmIChldmVudFRhcmdldFBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY2Nlc3Nvcmllcy1zdHlsZXNfX2xhYmVsXCIpKSB7XG4gICAgYWNjZXNzb3J5VHlwZSA9IGV2ZW50VGFyZ2V0VmFsdWU7XG4gICAgYnV5ZXJQYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJidXllci0taGlkZVwiKTtcbiAgICBhY2Nlc3Nvcmllc0l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGlmICghaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoXCJhY2Nlc3Nvcmllcy1zdHlsZXMtLWhpZGVcIikpIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGJ1eWVyQmFja1RleHQuaW5uZXJUZXh0ID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtdGV4dFwiKTtcbiAgfVxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJhY2stYnV0dG9uXCIpKSB7XG4gICAgZmxhdCA9IG51bGw7XG4gICAgZmxhdFR5cGUuY2xhc3NMaXN0LnJlbW92ZShcImZsYXQtdHlwZS0taGlkZVwiKTtcbiAgICBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xuICB9XG59XG5mdW5jdGlvbiBiYWNrVG9BY2Nlc3Nvcmllc1R5cGUoZXZlbnQpIHtcbiAgaWYgKGV2ZW50LnRhcmdldC50eXBlICE9PSBcInN1Ym1pdFwiKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJ1eWVyX19pbWdcIikpIHtcbiAgICAgIGFjY2Vzc29yeVR5cGUgPSBudWxsO1xuICAgICAgYnV5ZXJQYWdlLmNsYXNzTGlzdC5hZGQoXCJidXllci0taGlkZVwiKTtcbiAgICAgIHN3aXRjaCAoZmxhdCkge1xuICAgICAgICBjYXNlIFwiZmxhdFwiOlxuICAgICAgICAgIGZsYXRBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYmFsY29ueVwiOlxuICAgICAgICAgIGJhbGNvbnlBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidGVycmFjZVwiOlxuICAgICAgICAgIHRlcnJhY2VBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGJ1eWVyRGF0YSA9IHtcbiAgICBuYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hbWVcIikudmFsdWUsXG4gICAgZW1haWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1haWxcIikudmFsdWUsXG4gICAgdGV4dDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJiYWxjb255VGV4dFwiKS52YWx1ZSxcbiAgICBkb25hdGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG9uYXRpb25BbW91bnRcIikudmFsdWUsXG4gIH07XG4gIGJ1eWVyUGFnZS5jbGFzc0xpc3QuYWRkKFwiYnV5ZXItLWhpZGVcIik7XG4gIGlmICghZXZlbnQuc3VibWl0dGVyLmNsYXNzTGlzdC5jb250YWlucyhcInRoYW5rLXlvdS1wYWdlX19kb3dubG9hZFwiKSkge1xuICAgIHRoYW5rWW91UGFnZVBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcInRoYW5rLXlvdS1wYWdlLS1oaWRlXCIpO1xuICB9XG4gIGNvbnN0IHsgbmFtZSwgZW1haWwsIHRleHQsIGRvbmF0ZSB9ID0gYnV5ZXJEYXRhO1xuICBhbGVydChcbiAgICBgJHtuYW1lfSwg0LLQsNGI0LAg0L/QvtC60YPQv9C60LAgJHtmbGF0fSArICR7YWNjZXNzb3J5VHlwZX0gJHtcbiAgICAgIHRleHQgIT09IFwiXCIgPyB0ZXh0IDogXCJcIlxuICAgIH0sINC90LAg0YHRg9C80LzRgyAke2RvbmF0ZX3Qs9GA0L0g0YHRgtCy0L7RgNC10L3QsCDRgtCwINC+0YfRltC60YPRlCDQvtC/0LvQsNGC0LguINCS0LDRiNCwINC/0L7RiNGC0LAgJHtlbWFpbH1gXG4gICk7XG4gIHJlc2V0VmFsdWVzKFwibmFtZVwiLCBcIlwiKTtcbiAgcmVzZXRWYWx1ZXMoXCJlbWFpbFwiLCBcIlwiKTtcbiAgcmVzZXRWYWx1ZXMoXCJiYWxjb255VGV4dFwiLCBcIlwiKTtcbiAgcmVzZXRWYWx1ZXMoXCJkb25hdGlvbkFtb3VudFwiLCBcIlwiKTtcbn1cbmZ1bmN0aW9uIHRvQ2VydGlmaWNhdGVQYWdlKGV2ZW50KSB7XG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhhbmsteW91LXBhZ2VfX2Rvd25sb2FkXCIpKSB7XG4gICAgdGhhbmtZb3VQYWdlUGFnZS5jbGFzc0xpc3QuYWRkKFwidGhhbmsteW91LXBhZ2UtLWhpZGVcIik7XG4gICAgY2VydGlmaWNhdGVQYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJjZXJ0aWZpY2F0ZS0taGlkZVwiKTtcbiAgfVxuICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRoYW5rLXlvdS1wYWdlX190by1mbGF0XCIpKSB7XG4gICAgYWxlcnQoXCLQv9C10YDQtdGF0ZbQtCDQtNC+INC60LLQsNGA0YLQuFwiKTtcbiAgfVxufVxuZnVuY3Rpb24gZG93bmxvYWRDZXJ0aWZpY2F0ZShldmVudCkge1xuICBhbGVydChcItCi0YPRgiDQvNCw0ZQg0L/QvtGH0LDRgtC40YHRjCDRgdC60LDRh9GD0LLQsNC90L3RjyDRgdC10YDRgtC40YTRltC60LDRgtGDXCIpO1xuICBmbGF0VHlwZS5jbGFzc0xpc3QucmVtb3ZlKFwiZmxhdC10eXBlLS1oaWRlXCIpO1xuICBjZXJ0aWZpY2F0ZVBhZ2UuY2xhc3NMaXN0LmFkZChcImNlcnRpZmljYXRlLS1oaWRlXCIpO1xufVxuXG5mbGF0VHlwZUxpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZsYXRUeXBlVmFyKTtcbmFjY2Vzc29yeVR5cGVMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhY2Nlc3Nvcmllc1R5cGVWYXIpO1xuYnV5ZXJQYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBiYWNrVG9BY2Nlc3Nvcmllc1R5cGUpO1xudGhhbmtZb3VQYWdlUGFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdG9DZXJ0aWZpY2F0ZVBhZ2UpO1xudG9DZXJ0aWZpY2F0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG93bmxvYWRDZXJ0aWZpY2F0ZSk7XG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlU3VibWl0KTtcbiIsImNvbnN0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0X19saXN0XCIpO1xuY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0YXJ0X19saW5rXCIpO1xuY29uc3Qgc3RhcnRQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydFwiKTtcbmNvbnN0IGdlbmVyYWxQYWdlTWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZXJhbFwiKTtcbmNvbnN0IG1lbnVMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RhcnRfX2xpbmtcIik7XG5jb25zdCBtZW51TGlua3NEZXNrdG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5uYXZfX2xpbmtcIik7XG5jb25zdCBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlci1tZW51X19idXR0b25cIik7XG5jb25zdCBiYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXItbWVudV9fYmFja1wiKTtcbmNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyLW1lbnVfX2hlYWRlclwiKTtcbmNvbnN0IGJ1cmdlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtY29udGVudFwiKTtcbmNvbnN0IG5hdmlnYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibmF2XCIpO1xuY29uc3QgbWVudVBhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0XCIpO1xuY29uc3QgdGhhbmtZb3VQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aGFuay15b3UtcGFnZVwiKTtcblxuZnVuY3Rpb24gaGlkZU5hdkVsZW1lbnQobmF2RWxlbWVudCwgbmF2RWxlbWVudEF0dHJpYnV0ZSkge1xuICAgIG5hdkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShgJHtuYXZFbGVtZW50QXR0cmlidXRlfS0tc2hvd2ApO1xufVxuXG5mdW5jdGlvbiBzaG93RWxlbWVudChlbGVtZW50SWQpIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpLmNsYXNzTGlzdC5hZGQoYCR7ZWxlbWVudElkfS0tc2hvd2ApO1xufVxuXG5mdW5jdGlvbiBoaWRlRWxlbWVudHMoZWxlbWVudElkKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKS5jbGFzc0xpc3QucmVtb3ZlKGAke2VsZW1lbnRJZH0tLXNob3dgKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYWxcIikuY2xhc3NMaXN0LnJlbW92ZShgc2hvd19fZ2VuZXJhbF9fZGVza3RvcGApO1xufVxuXG5mdW5jdGlvbiBvcGVuTW9iaWxlTWVudSh0YXJnZXQpIHtcbiAgICBzdGFydFBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcInN0YXJ0LS1oaWRlXCIpO1xuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwiYnVyZ2VyLW1lbnVfX2J1dHRvbi0tb3BlblwiKTtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImJ1cmdlci1tZW51X19idXR0b24tLWNsb3NlXCIpO1xuICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2hlYWRlci0tYWN0aXZlXCIpO1xuICAgIGJ1cmdlck1lbnUuY2xhc3NMaXN0LnJlbW92ZShcIm1lbnUtY29udGVudC0taGlkZVwiKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2JpbGVNZW51KHRhcmdldCkge1xuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2J1dHRvbi0tb3BlblwiKTtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJ1cmdlci1tZW51X19idXR0b24tLWNsb3NlXCIpO1xuICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwiYnVyZ2VyLW1lbnVfX2hlYWRlci0tYWN0aXZlXCIpO1xuICAgIGJ1cmdlck1lbnUuY2xhc3NMaXN0LmFkZChcIm1lbnUtY29udGVudC0taGlkZVwiKTtcbn1cblxuZnVuY3Rpb24gYmFja1RvTmF2aWdhdGlvbigpIHtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImJ1cmdlci1tZW51X19idXR0b24tLWhpZGVcIik7XG4gICAgYmFjay5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2JhY2stLWhpZGVcIik7XG4gICAgc3RhcnRQYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJzdGFydC0taGlkZVwiKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYWxcIikuY2xhc3NMaXN0LmFkZChgc2hvd19fZ2VuZXJhbF9fZGVza3RvcGApO1xuICAgIEFycmF5LmZyb20obWVudUxpbmtzRGVza3RvcCkuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgY29uc3QgbmF2RWxlbWVudEF0dHJpYnV0ZSA9IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtaXRlbVwiKTtcbiAgICAgICAgaWYgKG5hdkVsZW1lbnRBdHRyaWJ1dGUgIT09IFwiZ2VuZXJhbFwiKSB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19saW5rLS1hY3RpdmVcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwibmF2X19saW5rLS1hY3RpdmVcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoIXRoYW5rWW91UGFnZS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aGFuay15b3UtcGFnZS0taGlkZVwiKSkge1xuICAgICAgICB0aGFua1lvdVBhZ2UuY2xhc3NMaXN0LmFkZChcInRoYW5rLXlvdS1wYWdlLS1oaWRlXCIpO1xuICAgICAgICBmbGF0VHlwZS5jbGFzc0xpc3QucmVtb3ZlKFwiZmxhdC10eXBlLS1oaWRlXCIpO1xuICAgIH1cbiAgICBpZiAoIWNlcnRpZmljYXRlUGFnZS5jbGFzc0xpc3QuY29udGFpbnMoXCJjZXJ0aWZpY2F0ZS0taGlkZVwiKSkge1xuICAgICAgICBjZXJ0aWZpY2F0ZVBhZ2UuY2xhc3NMaXN0LmFkZChcImNlcnRpZmljYXRlLS1oaWRlXCIpO1xuICAgICAgICBmbGF0VHlwZS5jbGFzc0xpc3QucmVtb3ZlKFwiZmxhdC10eXBlLS1oaWRlXCIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlTmF2RWxlbWVudHMoYWN0aW9uKSB7XG4gICAgQXJyYXkuZnJvbShtZW51TGlua3MpLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgY29uc3QgbmF2RWxlbWVudEF0dHJpYnV0ZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1uYXZcIik7XG4gICAgICAgIGNvbnN0IG5hdkVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYXZFbGVtZW50QXR0cmlidXRlKTtcbiAgICAgICAgYWN0aW9uKG5hdkVsZW1lbnQsIG5hdkVsZW1lbnRBdHRyaWJ1dGUpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUxpbmsodGFyZ2V0KSB7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcbiAgICBzdGFydFBhZ2UuY2xhc3NMaXN0LmFkZChcInN0YXJ0LS1oaWRlXCIpO1xuICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2hlYWRlci0tYWN0aXZlXCIpO1xuICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2J1dHRvbi0taGlkZVwiKTtcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImJ1cmdlci1tZW51X19idXR0b24tLW9wZW5cIik7XG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbWVudV9fYnV0dG9uLS1jbG9zZVwiKTtcbiAgICBiYWNrLmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXItbWVudV9fYmFjay0taGlkZVwiKTtcbiAgICBidXJnZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoXCJtZW51LWNvbnRlbnQtLWhpZGVcIik7XG59XG5cbmZ1bmN0aW9uIGRlYWN0aXZhdGVMaW5rcyhtZW51TGlua3MpIHtcbiAgICBBcnJheS5mcm9tKG1lbnVMaW5rcykuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcbiAgICAgICAgY29uc3QgbmF2RWxlbWVudEF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pdGVtXCIpO1xuICAgICAgICBoaWRlRWxlbWVudHMobmF2RWxlbWVudEF0dHJpYnV0ZSk7XG4gICAgfSk7XG59XG5cbm5hdmlnYXRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldDtcbiAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZfX2xpbmtcIikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZW51TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGlua1wiKTtcbiAgICBjb25zdCB0YXJnZXRBdHRyaWJ1dGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pdGVtXCIpO1xuXG4gICAgZGVhY3RpdmF0ZUxpbmtzKG1lbnVMaW5rcywgdGFyZ2V0QXR0cmlidXRlKTtcbiAgICBzaG93RWxlbWVudCh0YXJnZXRBdHRyaWJ1dGUpO1xuICAgIGFjdGl2YXRlTGluayh0YXJnZXQpO1xufSk7XG5cbmhlYWRlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnVyZ2VyLW1lbnVfX2J1dHRvbi0tb3BlblwiKSkge1xuICAgICAgICBvcGVuTW9iaWxlTWVudSh0YXJnZXQpO1xuICAgICAgICB1cGRhdGVOYXZFbGVtZW50cyhoaWRlTmF2RWxlbWVudCk7XG4gICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnVyZ2VyLW1lbnVfX2J1dHRvbi0tY2xvc2VcIikpIHtcbiAgICAgICAgY2xvc2VNb2JpbGVNZW51KHRhcmdldCk7XG4gICAgICAgIHVwZGF0ZU5hdkVsZW1lbnRzKChuYXZFbGVtZW50LCBuYXZFbGVtZW50QXR0cmlidXRlKSA9PiB7XG4gICAgICAgICAgICBpZiAobmF2RWxlbWVudEF0dHJpYnV0ZSAhPT0gXCJnZW5lcmFsXCIpIHtcbiAgICAgICAgICAgICAgICBoaWRlTmF2RWxlbWVudChuYXZFbGVtZW50LCBuYXZFbGVtZW50QXR0cmlidXRlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvd0VsZW1lbnQobmF2RWxlbWVudEF0dHJpYnV0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImJ1cmdlci1tZW51X19iYWNrXCIpKSB7XG4gICAgICAgIGJhY2tUb05hdmlnYXRpb24odGFyZ2V0KTtcbiAgICAgICAgdXBkYXRlTmF2RWxlbWVudHMoKG5hdkVsZW1lbnQsIG5hdkVsZW1lbnRBdHRyaWJ1dGUpID0+IHtcbiAgICAgICAgICAgIG5hdkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcbiAgICAgICAgICAgICAgICBgJHtuYXZFbGVtZW50QXR0cmlidXRlfS0tc2hvd2AsXG4gICAgICAgICAgICAgICAgYCR7bmF2RWxlbWVudEF0dHJpYnV0ZX0tLWhpZGVgXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9XG59KTtcblxuQXJyYXkuZnJvbShtZW51TGlua3MpLmZvckVhY2goKG5hdkVsZW1lbnQpID0+IHtcbiAgICBuYXZFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHN0YXJ0UGFnZS5jbGFzc0xpc3QuYWRkKFwic3RhcnQtLWhpZGVcIik7XG4gICAgICAgIGNvbnN0IG5hdkVsZW1lbnRBdHRyaWJ1dGUgPSBuYXZFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbmF2XCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYWxcIikuY2xhc3NMaXN0LnJlbW92ZShgc2hvd19fZ2VuZXJhbF9fZGVza3RvcGApO1xuICAgICAgICBzaG93RWxlbWVudChuYXZFbGVtZW50QXR0cmlidXRlKVxuICAgICAgICBBcnJheS5mcm9tKG1lbnVMaW5rc0Rlc2t0b3ApLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuYXZFbGVtZW50QXR0cmlidXRlRGVza3RvcCA9IGVsLmdldEF0dHJpYnV0ZShcImRhdGEtaXRlbVwiKTtcbiAgICAgICAgICAgIGlmIChuYXZFbGVtZW50QXR0cmlidXRlRGVza3RvcCA9PT0gbmF2RWxlbWVudEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fbGluay0tYWN0aXZlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbWVudV9fYnV0dG9uLS1oaWRlXCIpO1xuICAgICAgICBiYWNrLmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXItbWVudV9fYmFjay0taGlkZVwiKTtcbiAgICB9KTtcbn0pO1xuXG4iLCJ3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYm90dG9tXCIpLnNjcm9sbEludG9WaWV3KHRydWUpO1xufTsiLCJjb25zdCB0ZXJnZXQgPSAxMF8wMDBfMDAwO1xuY29uc3QgYWxyZWFkeUhhdmUgPSBkb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIi5wdXJwb3NlX19iYXJcIilcbiAgLmdldEF0dHJpYnV0ZShcImRhdGEtZmlsbFwiKTtcbmNvbnN0IGZpbGxFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wdXJwb3NlX19maWxsXCIpO1xuY29uc3QgY291bnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wdXJwb3NlX19jb3VudFwiKTtcbmNvbnN0IHBlcmNlbnRhZ2UgPSBhbHJlYWR5SGF2ZSAvICh0ZXJnZXQgLyAxMDApO1xuZmlsbEVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50YWdlfSVgO1xuY291bnRFbGVtZW50LnRleHRDb250ZW50ID0gYCR7YWxyZWFkeUhhdmV9IC8gJHt0ZXJnZXR9YDtcbiJdfQ==
