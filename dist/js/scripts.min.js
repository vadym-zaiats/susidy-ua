"use strict";const donationButtons=document.getElementsByClassName("donation-button"),generalPage=document.getElementById("general");function hideAllPages(){var e=document.getElementsByClassName("start__link");Array.from(e).forEach(e=>{e=e.getAttribute("data-nav");document.getElementById(""+e).classList.add(e+"--hide"),document.getElementById(""+e).classList.remove(e+"--show")})}function menuPageHideAndShowDonationPage(){var e=document.querySelectorAll(".nav__link");Array.from(e).forEach(e=>{e.classList.remove("nav__link--active"),"general"===e.getAttribute("data-item")&&e.classList.add("nav__link--active")}),generalPage.classList.remove("general--hide"),generalPage.classList.add("general--show"),menuPage.classList.add("start--hide")}function handleButtonClick(){hideAllPages(),menuPageHideAndShowDonationPage()}Array.from(donationButtons).forEach(e=>{e.addEventListener("click",handleButtonClick)});let flat=null,accessoryType=null,buyerData=null;const form=document.querySelector(".general__form"),flatType=document.querySelector(".flat-type"),flatTypeList=document.querySelector(".flat-type__list"),accessoryTypeList=document.querySelector(".accessory-type"),buyerPage=document.querySelector(".buyer"),thankYouPagePage=document.getElementById("thank-you-page"),certificatePage=document.querySelector(".certificate"),accessoriesСontent=document.querySelector(".accessory-type"),accessoriesItems=[...accessoriesСontent.children],flatAccessories=document.getElementById("accessories-flat"),balconyAccessories=document.getElementById("accessories-balcony"),terraceAccessories=document.getElementById("accessories-terrace"),buyerBackText=document.querySelector(".buyer__back-text"),donateSum=document.querySelector(".buyer__sum"),toDownloadButton=document.querySelector(".thank-you-page__download"),toCertificateButton=document.querySelector(".certificate__button");function resetValues(e,t){document.getElementById(e).value=t,flat=null,accessoryType=null,buyerData=null}function flatTypeVar(e){e.preventDefault();var t=e.target.value,a=+e.target.getAttribute("data-flat-price"),e=e.target.getAttribute("data-flat-placeholder");flat=t,flatType.classList.add("flat-type--hide"),donateSum.min=a,donateSum.setAttribute("placeholder",e),"flat"===flat?flatAccessories.classList.remove("accessories-styles--hide"):"balcony"===flat?balconyAccessories.classList.remove("accessories-styles--hide"):"terrace"===flat&&terraceAccessories.classList.remove("accessories-styles--hide")}function accessoriesTypeVar(e){e.preventDefault();var t=e.target.value;e.target.parentElement.classList.contains("accessories-styles__label")&&(accessoryType=t,buyerPage.classList.remove("buyer--hide"),accessoriesItems.forEach(e=>{e.classList.contains("accessories-styles--hide")||e.classList.add("accessories-styles--hide")}),buyerBackText.innerText=e.target.getAttribute("data-text")),e.target.classList.contains("back-button")&&(flat=null,flatType.classList.remove("flat-type--hide"),e.target.parentElement.classList.add("accessories-styles--hide"))}function backToAccessoriesType(e){if("submit"!==e.target.type&&(e.preventDefault(),e.target.classList.contains("buyer__img")))switch(accessoryType=null,buyerPage.classList.add("buyer--hide"),flat){case"flat":flatAccessories.classList.remove("accessories-styles--hide");break;case"balcony":balconyAccessories.classList.remove("accessories-styles--hide");break;case"terrace":terraceAccessories.classList.remove("accessories-styles--hide")}}function handleSubmit(e){e.preventDefault(),buyerData={name:document.getElementById("name").value,email:document.getElementById("email").value,text:document.getElementById("balconyText").value,donate:document.getElementById("donationAmount").value},buyerPage.classList.add("buyer--hide"),e.submitter.classList.contains("thank-you-page__download")||thankYouPagePage.classList.remove("thank-you-page--hide");var{name:e,email:t,text:a,donate:s}=buyerData;alert(`${e}, ваша покупка ${flat} + ${accessoryType} ${""!==a?a:""}, на сумму ${s}грн створена та очікує оплати. Ваша пошта `+t),resetValues("name",""),resetValues("email",""),resetValues("balconyText",""),resetValues("donationAmount","")}function toCertificatePage(e){e.target.classList.contains("thank-you-page__download")&&(thankYouPagePage.classList.add("thank-you-page--hide"),certificatePage.classList.remove("certificate--hide")),e.target.classList.contains("thank-you-page__to-flat")&&alert("перехід до кварти")}function downloadCertificate(e){alert("Тут має початись скачування сертифікату"),flatType.classList.remove("flat-type--hide"),certificatePage.classList.add("certificate--hide")}flatTypeList.addEventListener("click",flatTypeVar),accessoryTypeList.addEventListener("click",accessoriesTypeVar),buyerPage.addEventListener("click",backToAccessoriesType),thankYouPagePage.addEventListener("click",toCertificatePage),toCertificateButton.addEventListener("click",downloadCertificate),form.addEventListener("submit",handleSubmit);const list=document.querySelector(".start__list"),title=document.querySelectorAll(".start__link"),startPage=document.querySelector(".start"),generalPageMenu=document.getElementById("general"),menuLinks=document.querySelectorAll(".start__link"),menuLinksDesktop=document.querySelectorAll(".nav__link"),button=document.querySelector(".burger-menu__button"),back=document.querySelector(".burger-menu__back"),header=document.querySelector(".burger-menu__header"),burgerMenu=document.querySelector(".menu-content"),navigation=document.querySelector("nav"),menuPage=document.getElementById("start"),thankYouPage=document.querySelector(".thank-you-page");function hideNavElement(e,t){e.classList.remove(t+"--show")}function showElement(e){document.getElementById(e).classList.add(e+"--show")}function hideElements(e){document.getElementById(e).classList.remove(e+"--show"),document.getElementById("general").classList.remove("show__general__desktop")}function openMobileMenu(e){startPage.classList.remove("start--hide"),e.classList.remove("burger-menu__button--open"),e.classList.add("burger-menu__button--close"),header.classList.add("burger-menu__header--active"),burgerMenu.classList.remove("menu-content--hide")}function closeMobileMenu(e){e.classList.add("burger-menu__button--open"),e.classList.remove("burger-menu__button--close"),header.classList.remove("burger-menu__header--active"),burgerMenu.classList.add("menu-content--hide")}function backToNavigation(){button.classList.remove("burger-menu__button--hide"),back.classList.add("burger-menu__back--hide"),startPage.classList.remove("start--hide"),document.getElementById("general").classList.add("show__general__desktop"),Array.from(menuLinksDesktop).forEach(e=>{"general"!==e.getAttribute("data-item")?e.classList.remove("nav__link--active"):e.classList.add("nav__link--active")}),thankYouPage.classList.contains("thank-you-page--hide")||(thankYouPage.classList.add("thank-you-page--hide"),flatType.classList.remove("flat-type--hide")),certificatePage.classList.contains("certificate--hide")||(certificatePage.classList.add("certificate--hide"),flatType.classList.remove("flat-type--hide"))}function updateNavElements(a){Array.from(menuLinks).forEach(e=>{var e=e.getAttribute("data-nav"),t=document.getElementById(e);a(t,e)})}function activateLink(e){e.classList.add("nav__link--active"),startPage.classList.add("start--hide"),header.classList.add("burger-menu__header--active"),button.classList.add("burger-menu__button--hide"),button.classList.remove("burger-menu__button--open"),button.classList.add("burger-menu__button--close"),back.classList.remove("burger-menu__back--hide"),burgerMenu.classList.remove("menu-content--hide")}function deactivateLinks(e){Array.from(e).forEach(e=>{e.classList.remove("nav__link--active"),hideElements(e.getAttribute("data-item"))})}navigation.addEventListener("click",e=>{var t,e=e.target;e.classList.contains("nav__link")&&(deactivateLinks(document.querySelectorAll(".nav__link"),t=e.getAttribute("data-item")),showElement(t),activateLink(e))}),header.addEventListener("click",e=>{e=e.target;e.classList.contains("burger-menu__button--open")?(openMobileMenu(e),updateNavElements(hideNavElement)):e.classList.contains("burger-menu__button--close")?(closeMobileMenu(e),updateNavElements((e,t)=>{"general"!==t?hideNavElement(e,t):showElement(t)})):e.classList.contains("burger-menu__back")&&(backToNavigation(e),updateNavElements((e,t)=>{e.classList.remove(t+"--show",t+"--hide")}))}),Array.from(menuLinks).forEach(e=>{e.addEventListener("click",()=>{startPage.classList.add("start--hide");const t=e.getAttribute("data-nav");document.getElementById("general").classList.remove("show__general__desktop"),showElement(t),Array.from(menuLinksDesktop).forEach(e=>{e.getAttribute("data-item")===t?e.classList.add("nav__link--active"):e.classList.remove("nav__link--active")}),button.classList.add("burger-menu__button--hide"),back.classList.remove("burger-menu__back--hide")})}),window.onload=function(){document.getElementById("bottom").scrollIntoView(!0)};const terget=document.querySelector(".purpose__bar").getAttribute("data-target"),alreadyHave=document.querySelector(".purpose__bar").getAttribute("data-fill"),fillElement=document.querySelector(".purpose__fill"),countElement=document.querySelector(".purpose__count"),percentage=alreadyHave/(terget/100);fillElement.style.width=percentage+"%",countElement.textContent=alreadyHave+" / "+terget;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvbmF0aW9uQnV0dG9uLmpzIiwiZm9ybS5qcyIsIm1lbnUuanMiLCJzY3JvbGxUb0JvdHRvbS5qcyIsInRhcmdldC5qcyJdLCJuYW1lcyI6WyJkb25hdGlvbkJ1dHRvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJnZW5lcmFsUGFnZSIsImdldEVsZW1lbnRCeUlkIiwiaGlkZUFsbFBhZ2VzIiwibGV0IiwibmF2RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJmb3JFYWNoIiwiZWxlbWVudCIsImRhdGFBdHRyaWJ1dGVWYWx1ZSIsImdldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIm1lbnVQYWdlSGlkZUFuZFNob3dEb25hdGlvblBhZ2UiLCJtZW51TGlua3MiLCJxdWVyeVNlbGVjdG9yQWxsIiwibWVudVBhZ2UiLCJoYW5kbGVCdXR0b25DbGljayIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJmbGF0IiwiYWNjZXNzb3J5VHlwZSIsImJ1eWVyRGF0YSIsImZvcm0iLCJxdWVyeVNlbGVjdG9yIiwiZmxhdFR5cGUiLCJmbGF0VHlwZUxpc3QiLCJhY2Nlc3NvcnlUeXBlTGlzdCIsImJ1eWVyUGFnZSIsInRoYW5rWW91UGFnZVBhZ2UiLCJjZXJ0aWZpY2F0ZVBhZ2UiLCJhY2Nlc3Nvcmllc9Chb250ZW50IiwiYWNjZXNzb3JpZXNJdGVtcyIsImNoaWxkcmVuIiwiZmxhdEFjY2Vzc29yaWVzIiwiYmFsY29ueUFjY2Vzc29yaWVzIiwidGVycmFjZUFjY2Vzc29yaWVzIiwiYnV5ZXJCYWNrVGV4dCIsImRvbmF0ZVN1bSIsInRvRG93bmxvYWRCdXR0b24iLCJ0b0NlcnRpZmljYXRlQnV0dG9uIiwicmVzZXRWYWx1ZXMiLCJ2YWx1ZSIsImZsYXRUeXBlVmFyIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsImV2ZW50VGFyZ2V0VmFsdWUiLCJ0YXJnZXQiLCJmbGF0UHJpY2UiLCJmbGF0UGxhY2Vob2xkZXIiLCJtaW4iLCJzZXRBdHRyaWJ1dGUiLCJhY2Nlc3Nvcmllc1R5cGVWYXIiLCJwYXJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJpdGVtIiwiaW5uZXJUZXh0IiwiYmFja1RvQWNjZXNzb3JpZXNUeXBlIiwidHlwZSIsImhhbmRsZVN1Ym1pdCIsIm5hbWUiLCJlbWFpbCIsInRleHQiLCJkb25hdGUiLCJzdWJtaXR0ZXIiLCJhbGVydCIsInRvQ2VydGlmaWNhdGVQYWdlIiwiZG93bmxvYWRDZXJ0aWZpY2F0ZSIsImxpc3QiLCJ0aXRsZSIsInN0YXJ0UGFnZSIsImdlbmVyYWxQYWdlTWVudSIsIm1lbnVMaW5rc0Rlc2t0b3AiLCJiYWNrIiwiaGVhZGVyIiwiYnVyZ2VyTWVudSIsIm5hdmlnYXRpb24iLCJ0aGFua1lvdVBhZ2UiLCJoaWRlTmF2RWxlbWVudCIsIm5hdkVsZW1lbnQiLCJuYXZFbGVtZW50QXR0cmlidXRlIiwic2hvd0VsZW1lbnQiLCJlbGVtZW50SWQiLCJoaWRlRWxlbWVudHMiLCJvcGVuTW9iaWxlTWVudSIsImNsb3NlTW9iaWxlTWVudSIsImJhY2tUb05hdmlnYXRpb24iLCJlbCIsInVwZGF0ZU5hdkVsZW1lbnRzIiwiYWN0aW9uIiwiYWN0aXZhdGVMaW5rIiwiZGVhY3RpdmF0ZUxpbmtzIiwidGFyZ2V0QXR0cmlidXRlIiwid2luZG93Iiwib25sb2FkIiwic2Nyb2xsSW50b1ZpZXciLCJ0ZXJnZXQiLCJhbHJlYWR5SGF2ZSIsImZpbGxFbGVtZW50IiwiY291bnRFbGVtZW50IiwicGVyY2VudGFnZSIsInN0eWxlIiwid2lkdGgiLCJ0ZXh0Q29udGVudCJdLCJtYXBwaW5ncyI6ImFBQUEsTUFBTUEsZ0JBQWtCQyxTQUFTQyx1QkFBdUIsaUJBQWlCLEVBQ25FQyxZQUFjRixTQUFTRyxlQUFlLFNBQVMsRUFFckQsU0FBU0MsZUFDTEMsSUFBSUMsRUFBY04sU0FBU0MsdUJBQXVCLGFBQWEsRUFDL0RNLE1BQU1DLEtBQUtGLENBQVcsRUFBRUcsUUFBU0MsSUFDekJDLEVBQXFCRCxFQUFRRSxhQUFh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LEtBQ2pDbUQsVUFBVTVELFVBQVVDLElBQUksYUFBYSxFQUNyQyxNQUFNcUUsRUFBc0JELEVBQVd0RSxhQUFhLFVBQVUsRUFDOURaLFNBQVNHLGVBQWUsU0FBUyxFQUFFVSxVQUFVRSxPQUFRLHdCQUF1QixFQUM1RXFFLFlBQVlELENBQW1CLEVBQy9CNUUsTUFBTUMsS0FBS21FLGdCQUFnQixFQUFFbEUsUUFBU2lGLElBQ0NBLEVBQUc5RSxhQUFhLFdBQVcsSUFDM0J1RSxFQUMvQk8sRUFBRzdFLFVBQVVDLElBQUksbUJBQW1CLEVBRXBDNEUsRUFBRzdFLFVBQVVFLE9BQU8sbUJBQW1CLENBRS9DLENBQUMsRUFDRE0sT0FBT1IsVUFBVUMsSUFBSSwyQkFBMkIsRUFDaEQ4RCxLQUFLL0QsVUFBVUUsT0FBTyx5QkFBeUIsQ0FDbkQsQ0FBQyxDQUNMLENBQUMsRUNuSkRpRixPQUFPQyxPQUFTLFdBQ1pqRyxTQUFTRyxlQUFlLFFBQVEsRUFBRStGLGVBQWUsQ0FBQSxDQUFJLENBQ3pELEVDRkEsTUFBTUMsT0FBU25HLFNBQ2IyQixjQUFjLGVBQWUsRUFDN0JmLGFBQWEsYUFBYSxFQUV0QndGLFlBQWNwRyxTQUNsQjJCLGNBQWMsZUFBZSxFQUM3QmYsYUFBYSxXQUFXLEVBRXBCeUYsWUFBY3JHLFNBQVMyQixjQUFjLGdCQUFnQixFQUNyRDJFLGFBQWV0RyxTQUFTMkIsY0FBYyxpQkFBaUIsRUFFdkQ0RSxXQUFhSCxhQUFlRCxPQUFTLEtBQzNDRSxZQUFZRyxNQUFNQyxNQUFXRixXQUFGLElBQzNCRCxhQUFhSSxZQUFpQk4sWUFBRixNQUFtQkQiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkb25hdGlvbkJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZG9uYXRpb24tYnV0dG9uXCIpO1xyXG5jb25zdCBnZW5lcmFsUGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZXJhbFwiKTtcclxuXHJcbmZ1bmN0aW9uIGhpZGVBbGxQYWdlcygpIHtcclxuICAgIGxldCBuYXZFbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJzdGFydF9fbGlua1wiKTtcclxuICAgIEFycmF5LmZyb20obmF2RWxlbWVudHMpLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICBsZXQgZGF0YUF0dHJpYnV0ZVZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW5hdlwiKTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtkYXRhQXR0cmlidXRlVmFsdWV9YCkuY2xhc3NMaXN0LmFkZChgJHtkYXRhQXR0cmlidXRlVmFsdWV9LS1oaWRlYCk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7ZGF0YUF0dHJpYnV0ZVZhbHVlfWApLmNsYXNzTGlzdC5yZW1vdmUoYCR7ZGF0YUF0dHJpYnV0ZVZhbHVlfS0tc2hvd2ApO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1lbnVQYWdlSGlkZUFuZFNob3dEb25hdGlvblBhZ2UoKSB7XHJcbiAgICBjb25zdCBtZW51TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGlua1wiKTtcclxuICAgIEFycmF5LmZyb20obWVudUxpbmtzKS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibmF2X19saW5rLS1hY3RpdmVcIik7XHJcbiAgICAgICAgY29uc3QgbmF2RWxlbWVudEF0dHJpYnV0ZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1pdGVtXCIpO1xyXG4gICAgICAgIGlmIChuYXZFbGVtZW50QXR0cmlidXRlID09PSBcImdlbmVyYWxcIikge1xyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGdlbmVyYWxQYWdlLmNsYXNzTGlzdC5yZW1vdmUoXCJnZW5lcmFsLS1oaWRlXCIpO1xyXG4gICAgZ2VuZXJhbFBhZ2UuY2xhc3NMaXN0LmFkZChcImdlbmVyYWwtLXNob3dcIik7XHJcbiAgICBtZW51UGFnZS5jbGFzc0xpc3QuYWRkKFwic3RhcnQtLWhpZGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUJ1dHRvbkNsaWNrKCkge1xyXG4gICAgaGlkZUFsbFBhZ2VzKCk7XHJcbiAgICBtZW51UGFnZUhpZGVBbmRTaG93RG9uYXRpb25QYWdlKCk7XHJcbn1cclxuXHJcbkFycmF5LmZyb20oZG9uYXRpb25CdXR0b25zKS5mb3JFYWNoKChidXR0b24pID0+IHtcclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlQnV0dG9uQ2xpY2spO1xyXG59KTtcclxuIiwibGV0IGZsYXQgPSBudWxsLFxyXG4gIGFjY2Vzc29yeVR5cGUgPSBudWxsLFxyXG4gIGJ1eWVyRGF0YSA9IG51bGw7XHJcblxyXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5nZW5lcmFsX19mb3JtXCIpO1xyXG5jb25zdCBmbGF0VHlwZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmxhdC10eXBlXCIpO1xyXG5jb25zdCBmbGF0VHlwZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZsYXQtdHlwZV9fbGlzdFwiKTtcclxuY29uc3QgYWNjZXNzb3J5VHlwZUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmFjY2Vzc29yeS10eXBlXCIpO1xyXG5cclxuY29uc3QgYnV5ZXJQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXllclwiKTtcclxuY29uc3QgdGhhbmtZb3VQYWdlUGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGhhbmsteW91LXBhZ2VcIik7XHJcbmNvbnN0IGNlcnRpZmljYXRlUGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2VydGlmaWNhdGVcIik7XHJcblxyXG5jb25zdCBhY2Nlc3Nvcmllc9Chb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hY2Nlc3NvcnktdHlwZVwiKTtcclxuY29uc3QgYWNjZXNzb3JpZXNJdGVtcyA9IFsuLi5hY2Nlc3Nvcmllc9Chb250ZW50LmNoaWxkcmVuXTtcclxuXHJcbmNvbnN0IGZsYXRBY2Nlc3NvcmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWNjZXNzb3JpZXMtZmxhdFwiKTtcclxuY29uc3QgYmFsY29ueUFjY2Vzc29yaWVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhY2Nlc3Nvcmllcy1iYWxjb255XCIpO1xyXG5jb25zdCB0ZXJyYWNlQWNjZXNzb3JpZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFjY2Vzc29yaWVzLXRlcnJhY2VcIik7XHJcblxyXG5jb25zdCBidXllckJhY2tUZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXllcl9fYmFjay10ZXh0XCIpO1xyXG5jb25zdCBkb25hdGVTdW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1eWVyX19zdW1cIik7XHJcblxyXG5jb25zdCB0b0Rvd25sb2FkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aGFuay15b3UtcGFnZV9fZG93bmxvYWRcIik7XHJcbmNvbnN0IHRvQ2VydGlmaWNhdGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNlcnRpZmljYXRlX19idXR0b25cIik7XHJcblxyXG5mdW5jdGlvbiByZXNldFZhbHVlcyhlbGVtZW50LCB2YWx1ZSkge1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpLnZhbHVlID0gdmFsdWU7XHJcbiAgZmxhdCA9IG51bGw7XHJcbiAgYWNjZXNzb3J5VHlwZSA9IG51bGw7XHJcbiAgYnV5ZXJEYXRhID0gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZmxhdFR5cGVWYXIoZXZlbnQpIHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGNvbnN0IGV2ZW50VGFyZ2V0VmFsdWUgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgY29uc3QgZmxhdFByaWNlID0gK2V2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWZsYXQtcHJpY2VcIik7XHJcbiAgY29uc3QgZmxhdFBsYWNlaG9sZGVyID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtZmxhdC1wbGFjZWhvbGRlclwiKTtcclxuXHJcbiAgZmxhdCA9IGV2ZW50VGFyZ2V0VmFsdWU7XHJcbiAgZmxhdFR5cGUuY2xhc3NMaXN0LmFkZChcImZsYXQtdHlwZS0taGlkZVwiKTtcclxuICBkb25hdGVTdW0ubWluID0gZmxhdFByaWNlO1xyXG4gIGRvbmF0ZVN1bS5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBmbGF0UGxhY2Vob2xkZXIpO1xyXG4gIGlmIChmbGF0ID09PSBcImZsYXRcIikge1xyXG4gICAgZmxhdEFjY2Vzc29yaWVzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY2Nlc3Nvcmllcy1zdHlsZXMtLWhpZGVcIik7XHJcbiAgfSBlbHNlIGlmIChmbGF0ID09PSBcImJhbGNvbnlcIikge1xyXG4gICAgYmFsY29ueUFjY2Vzc29yaWVzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY2Nlc3Nvcmllcy1zdHlsZXMtLWhpZGVcIik7XHJcbiAgfSBlbHNlIGlmIChmbGF0ID09PSBcInRlcnJhY2VcIikge1xyXG4gICAgdGVycmFjZUFjY2Vzc29yaWVzLmNsYXNzTGlzdC5yZW1vdmUoXCJhY2Nlc3Nvcmllcy1zdHlsZXMtLWhpZGVcIik7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGFjY2Vzc29yaWVzVHlwZVZhcihldmVudCkge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgZXZlbnRUYXJnZXRWYWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICBjb25zdCBldmVudFRhcmdldFBhcmVudCA9IGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG4gIGlmIChldmVudFRhcmdldFBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY2Nlc3Nvcmllcy1zdHlsZXNfX2xhYmVsXCIpKSB7XHJcbiAgICBhY2Nlc3NvcnlUeXBlID0gZXZlbnRUYXJnZXRWYWx1ZTtcclxuICAgIGJ1eWVyUGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiYnV5ZXItLWhpZGVcIik7XHJcbiAgICBhY2Nlc3Nvcmllc0l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKCFpdGVtLmNsYXNzTGlzdC5jb250YWlucyhcImFjY2Vzc29yaWVzLXN0eWxlcy0taGlkZVwiKSkge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChcImFjY2Vzc29yaWVzLXN0eWxlcy0taGlkZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBidXllckJhY2tUZXh0LmlubmVyVGV4dCA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRleHRcIik7XHJcbiAgfVxyXG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmFjay1idXR0b25cIikpIHtcclxuICAgIGZsYXQgPSBudWxsO1xyXG4gICAgZmxhdFR5cGUuY2xhc3NMaXN0LnJlbW92ZShcImZsYXQtdHlwZS0taGlkZVwiKTtcclxuICAgIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJhY2Nlc3Nvcmllcy1zdHlsZXMtLWhpZGVcIik7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGJhY2tUb0FjY2Vzc29yaWVzVHlwZShldmVudCkge1xyXG4gIGlmIChldmVudC50YXJnZXQudHlwZSAhPT0gXCJzdWJtaXRcIikge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnV5ZXJfX2ltZ1wiKSkge1xyXG4gICAgICBhY2Nlc3NvcnlUeXBlID0gbnVsbDtcclxuICAgICAgYnV5ZXJQYWdlLmNsYXNzTGlzdC5hZGQoXCJidXllci0taGlkZVwiKTtcclxuICAgICAgc3dpdGNoIChmbGF0KSB7XHJcbiAgICAgICAgY2FzZSBcImZsYXRcIjpcclxuICAgICAgICAgIGZsYXRBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcImJhbGNvbnlcIjpcclxuICAgICAgICAgIGJhbGNvbnlBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcInRlcnJhY2VcIjpcclxuICAgICAgICAgIHRlcnJhY2VBY2Nlc3Nvcmllcy5jbGFzc0xpc3QucmVtb3ZlKFwiYWNjZXNzb3JpZXMtc3R5bGVzLS1oaWRlXCIpO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn1cclxuZnVuY3Rpb24gaGFuZGxlU3VibWl0KGV2ZW50KSB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBidXllckRhdGEgPSB7XHJcbiAgICBuYW1lOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5hbWVcIikudmFsdWUsXHJcbiAgICBlbWFpbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlbWFpbFwiKS52YWx1ZSxcclxuICAgIHRleHQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFsY29ueVRleHRcIikudmFsdWUsXHJcbiAgICBkb25hdGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG9uYXRpb25BbW91bnRcIikudmFsdWUsXHJcbiAgfTtcclxuICBidXllclBhZ2UuY2xhc3NMaXN0LmFkZChcImJ1eWVyLS1oaWRlXCIpO1xyXG4gIGlmICghZXZlbnQuc3VibWl0dGVyLmNsYXNzTGlzdC5jb250YWlucyhcInRoYW5rLXlvdS1wYWdlX19kb3dubG9hZFwiKSkge1xyXG4gICAgdGhhbmtZb3VQYWdlUGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwidGhhbmsteW91LXBhZ2UtLWhpZGVcIik7XHJcbiAgfVxyXG4gIGNvbnN0IHsgbmFtZSwgZW1haWwsIHRleHQsIGRvbmF0ZSB9ID0gYnV5ZXJEYXRhO1xyXG4gIGFsZXJ0KFxyXG4gICAgYCR7bmFtZX0sINCy0LDRiNCwINC/0L7QutGD0L/QutCwICR7ZmxhdH0gKyAke2FjY2Vzc29yeVR5cGV9ICR7XHJcbiAgICAgIHRleHQgIT09IFwiXCIgPyB0ZXh0IDogXCJcIlxyXG4gICAgfSwg0L3QsCDRgdGD0LzQvNGDICR7ZG9uYXRlfdCz0YDQvSDRgdGC0LLQvtGA0LXQvdCwINGC0LAg0L7Rh9GW0LrRg9GUINC+0L/Qu9Cw0YLQuC4g0JLQsNGI0LAg0L/QvtGI0YLQsCAke2VtYWlsfWBcclxuICApO1xyXG4gIHJlc2V0VmFsdWVzKFwibmFtZVwiLCBcIlwiKTtcclxuICByZXNldFZhbHVlcyhcImVtYWlsXCIsIFwiXCIpO1xyXG4gIHJlc2V0VmFsdWVzKFwiYmFsY29ueVRleHRcIiwgXCJcIik7XHJcbiAgcmVzZXRWYWx1ZXMoXCJkb25hdGlvbkFtb3VudFwiLCBcIlwiKTtcclxufVxyXG5mdW5jdGlvbiB0b0NlcnRpZmljYXRlUGFnZShldmVudCkge1xyXG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhhbmsteW91LXBhZ2VfX2Rvd25sb2FkXCIpKSB7XHJcbiAgICB0aGFua1lvdVBhZ2VQYWdlLmNsYXNzTGlzdC5hZGQoXCJ0aGFuay15b3UtcGFnZS0taGlkZVwiKTtcclxuICAgIGNlcnRpZmljYXRlUGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwiY2VydGlmaWNhdGUtLWhpZGVcIik7XHJcbiAgfVxyXG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGhhbmsteW91LXBhZ2VfX3RvLWZsYXRcIikpIHtcclxuICAgIGFsZXJ0KFwi0L/QtdGA0LXRhdGW0LQg0LTQviDQutCy0LDRgNGC0LhcIik7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvd25sb2FkQ2VydGlmaWNhdGUoZXZlbnQpIHtcclxuICBhbGVydChcItCi0YPRgiDQvNCw0ZQg0L/QvtGH0LDRgtC40YHRjCDRgdC60LDRh9GD0LLQsNC90L3RjyDRgdC10YDRgtC40YTRltC60LDRgtGDXCIpO1xyXG4gIGZsYXRUeXBlLmNsYXNzTGlzdC5yZW1vdmUoXCJmbGF0LXR5cGUtLWhpZGVcIik7XHJcbiAgY2VydGlmaWNhdGVQYWdlLmNsYXNzTGlzdC5hZGQoXCJjZXJ0aWZpY2F0ZS0taGlkZVwiKTtcclxufVxyXG5cclxuZmxhdFR5cGVMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmbGF0VHlwZVZhcik7XHJcbmFjY2Vzc29yeVR5cGVMaXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhY2Nlc3Nvcmllc1R5cGVWYXIpO1xyXG5idXllclBhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGJhY2tUb0FjY2Vzc29yaWVzVHlwZSk7XHJcbnRoYW5rWW91UGFnZVBhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRvQ2VydGlmaWNhdGVQYWdlKTtcclxudG9DZXJ0aWZpY2F0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZG93bmxvYWRDZXJ0aWZpY2F0ZSk7XHJcbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVTdWJtaXQpO1xyXG4iLCJjb25zdCBsaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGFydF9fbGlzdFwiKTtcclxuY29uc3QgdGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN0YXJ0X19saW5rXCIpO1xyXG5jb25zdCBzdGFydFBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0YXJ0XCIpO1xyXG5jb25zdCBnZW5lcmFsUGFnZU1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYWxcIik7XHJcbmNvbnN0IG1lbnVMaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3RhcnRfX2xpbmtcIik7XHJcbmNvbnN0IG1lbnVMaW5rc0Rlc2t0b3AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGlua1wiKTtcclxuY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXItbWVudV9fYnV0dG9uXCIpO1xyXG5jb25zdCBiYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXItbWVudV9fYmFja1wiKTtcclxuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXItbWVudV9faGVhZGVyXCIpO1xyXG5jb25zdCBidXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWNvbnRlbnRcIik7XHJcbmNvbnN0IG5hdmlnYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibmF2XCIpO1xyXG5jb25zdCBtZW51UGFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhcnRcIik7XHJcbmNvbnN0IHRoYW5rWW91UGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGhhbmsteW91LXBhZ2VcIik7XHJcblxyXG5mdW5jdGlvbiBoaWRlTmF2RWxlbWVudChuYXZFbGVtZW50LCBuYXZFbGVtZW50QXR0cmlidXRlKSB7XHJcbiAgICBuYXZFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoYCR7bmF2RWxlbWVudEF0dHJpYnV0ZX0tLXNob3dgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0VsZW1lbnQoZWxlbWVudElkKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpLmNsYXNzTGlzdC5hZGQoYCR7ZWxlbWVudElkfS0tc2hvd2ApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWRlRWxlbWVudHMoZWxlbWVudElkKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtZW50SWQpLmNsYXNzTGlzdC5yZW1vdmUoYCR7ZWxlbWVudElkfS0tc2hvd2ApO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZW5lcmFsXCIpLmNsYXNzTGlzdC5yZW1vdmUoYHNob3dfX2dlbmVyYWxfX2Rlc2t0b3BgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vYmlsZU1lbnUodGFyZ2V0KSB7XHJcbiAgICBzdGFydFBhZ2UuY2xhc3NMaXN0LnJlbW92ZShcInN0YXJ0LS1oaWRlXCIpO1xyXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXItbWVudV9fYnV0dG9uLS1vcGVuXCIpO1xyXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbWVudV9fYnV0dG9uLS1jbG9zZVwiKTtcclxuICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2hlYWRlci0tYWN0aXZlXCIpO1xyXG4gICAgYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKFwibWVudS1jb250ZW50LS1oaWRlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vYmlsZU1lbnUodGFyZ2V0KSB7XHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImJ1cmdlci1tZW51X19idXR0b24tLW9wZW5cIik7XHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImJ1cmdlci1tZW51X19idXR0b24tLWNsb3NlXCIpO1xyXG4gICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXItbWVudV9faGVhZGVyLS1hY3RpdmVcIik7XHJcbiAgICBidXJnZXJNZW51LmNsYXNzTGlzdC5hZGQoXCJtZW51LWNvbnRlbnQtLWhpZGVcIik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJhY2tUb05hdmlnYXRpb24oKSB7XHJcbiAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImJ1cmdlci1tZW51X19idXR0b24tLWhpZGVcIik7XHJcbiAgICBiYWNrLmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbWVudV9fYmFjay0taGlkZVwiKTtcclxuICAgIHN0YXJ0UGFnZS5jbGFzc0xpc3QucmVtb3ZlKFwic3RhcnQtLWhpZGVcIik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdlbmVyYWxcIikuY2xhc3NMaXN0LmFkZChgc2hvd19fZ2VuZXJhbF9fZGVza3RvcGApO1xyXG4gICAgQXJyYXkuZnJvbShtZW51TGlua3NEZXNrdG9wKS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5hdkVsZW1lbnRBdHRyaWJ1dGUgPSBlbC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWl0ZW1cIik7XHJcbiAgICAgICAgaWYgKG5hdkVsZW1lbnRBdHRyaWJ1dGUgIT09IFwiZ2VuZXJhbFwiKSB7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKFwibmF2X19saW5rLS1hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBpZiAoIXRoYW5rWW91UGFnZS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aGFuay15b3UtcGFnZS0taGlkZVwiKSkge1xyXG4gICAgICAgIHRoYW5rWW91UGFnZS5jbGFzc0xpc3QuYWRkKFwidGhhbmsteW91LXBhZ2UtLWhpZGVcIik7XHJcbiAgICAgICAgZmxhdFR5cGUuY2xhc3NMaXN0LnJlbW92ZShcImZsYXQtdHlwZS0taGlkZVwiKTtcclxuICAgIH1cclxuICAgIGlmICghY2VydGlmaWNhdGVQYWdlLmNsYXNzTGlzdC5jb250YWlucyhcImNlcnRpZmljYXRlLS1oaWRlXCIpKSB7XHJcbiAgICAgICAgY2VydGlmaWNhdGVQYWdlLmNsYXNzTGlzdC5hZGQoXCJjZXJ0aWZpY2F0ZS0taGlkZVwiKTtcclxuICAgICAgICBmbGF0VHlwZS5jbGFzc0xpc3QucmVtb3ZlKFwiZmxhdC10eXBlLS1oaWRlXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVOYXZFbGVtZW50cyhhY3Rpb24pIHtcclxuICAgIEFycmF5LmZyb20obWVudUxpbmtzKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbmF2RWxlbWVudEF0dHJpYnV0ZSA9IGl0ZW0uZ2V0QXR0cmlidXRlKFwiZGF0YS1uYXZcIik7XHJcbiAgICAgICAgY29uc3QgbmF2RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5hdkVsZW1lbnRBdHRyaWJ1dGUpO1xyXG4gICAgICAgIGFjdGlvbihuYXZFbGVtZW50LCBuYXZFbGVtZW50QXR0cmlidXRlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhY3RpdmF0ZUxpbmsodGFyZ2V0KSB7XHJcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcIm5hdl9fbGluay0tYWN0aXZlXCIpO1xyXG4gICAgc3RhcnRQYWdlLmNsYXNzTGlzdC5hZGQoXCJzdGFydC0taGlkZVwiKTtcclxuICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2hlYWRlci0tYWN0aXZlXCIpO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbWVudV9fYnV0dG9uLS1oaWRlXCIpO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXItbWVudV9fYnV0dG9uLS1vcGVuXCIpO1xyXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJidXJnZXItbWVudV9fYnV0dG9uLS1jbG9zZVwiKTtcclxuICAgIGJhY2suY2xhc3NMaXN0LnJlbW92ZShcImJ1cmdlci1tZW51X19iYWNrLS1oaWRlXCIpO1xyXG4gICAgYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKFwibWVudS1jb250ZW50LS1oaWRlXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWFjdGl2YXRlTGlua3MobWVudUxpbmtzKSB7XHJcbiAgICBBcnJheS5mcm9tKG1lbnVMaW5rcykuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm5hdl9fbGluay0tYWN0aXZlXCIpO1xyXG4gICAgICAgIGNvbnN0IG5hdkVsZW1lbnRBdHRyaWJ1dGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtaXRlbVwiKTtcclxuICAgICAgICBoaWRlRWxlbWVudHMobmF2RWxlbWVudEF0dHJpYnV0ZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxubmF2aWdhdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJuYXZfX2xpbmtcIikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBtZW51TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5hdl9fbGlua1wiKTtcclxuICAgIGNvbnN0IHRhcmdldEF0dHJpYnV0ZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWl0ZW1cIik7XHJcblxyXG4gICAgZGVhY3RpdmF0ZUxpbmtzKG1lbnVMaW5rcywgdGFyZ2V0QXR0cmlidXRlKTtcclxuICAgIHNob3dFbGVtZW50KHRhcmdldEF0dHJpYnV0ZSk7XHJcbiAgICBhY3RpdmF0ZUxpbmsodGFyZ2V0KTtcclxufSk7XHJcblxyXG5oZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJidXJnZXItbWVudV9fYnV0dG9uLS1vcGVuXCIpKSB7XHJcbiAgICAgICAgb3Blbk1vYmlsZU1lbnUodGFyZ2V0KTtcclxuICAgICAgICB1cGRhdGVOYXZFbGVtZW50cyhoaWRlTmF2RWxlbWVudCk7XHJcbiAgICB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJidXJnZXItbWVudV9fYnV0dG9uLS1jbG9zZVwiKSkge1xyXG4gICAgICAgIGNsb3NlTW9iaWxlTWVudSh0YXJnZXQpO1xyXG4gICAgICAgIHVwZGF0ZU5hdkVsZW1lbnRzKChuYXZFbGVtZW50LCBuYXZFbGVtZW50QXR0cmlidXRlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChuYXZFbGVtZW50QXR0cmlidXRlICE9PSBcImdlbmVyYWxcIikge1xyXG4gICAgICAgICAgICAgICAgaGlkZU5hdkVsZW1lbnQobmF2RWxlbWVudCwgbmF2RWxlbWVudEF0dHJpYnV0ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaG93RWxlbWVudChuYXZFbGVtZW50QXR0cmlidXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnVyZ2VyLW1lbnVfX2JhY2tcIikpIHtcclxuICAgICAgICBiYWNrVG9OYXZpZ2F0aW9uKHRhcmdldCk7XHJcbiAgICAgICAgdXBkYXRlTmF2RWxlbWVudHMoKG5hdkVsZW1lbnQsIG5hdkVsZW1lbnRBdHRyaWJ1dGUpID0+IHtcclxuICAgICAgICAgICAgbmF2RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFxyXG4gICAgICAgICAgICAgICAgYCR7bmF2RWxlbWVudEF0dHJpYnV0ZX0tLXNob3dgLFxyXG4gICAgICAgICAgICAgICAgYCR7bmF2RWxlbWVudEF0dHJpYnV0ZX0tLWhpZGVgXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuQXJyYXkuZnJvbShtZW51TGlua3MpLmZvckVhY2goKG5hdkVsZW1lbnQpID0+IHtcclxuICAgIG5hdkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBzdGFydFBhZ2UuY2xhc3NMaXN0LmFkZChcInN0YXJ0LS1oaWRlXCIpO1xyXG4gICAgICAgIGNvbnN0IG5hdkVsZW1lbnRBdHRyaWJ1dGUgPSBuYXZFbGVtZW50LmdldEF0dHJpYnV0ZShcImRhdGEtbmF2XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZXJhbFwiKS5jbGFzc0xpc3QucmVtb3ZlKGBzaG93X19nZW5lcmFsX19kZXNrdG9wYCk7XHJcbiAgICAgICAgc2hvd0VsZW1lbnQobmF2RWxlbWVudEF0dHJpYnV0ZSlcclxuICAgICAgICBBcnJheS5mcm9tKG1lbnVMaW5rc0Rlc2t0b3ApLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hdkVsZW1lbnRBdHRyaWJ1dGVEZXNrdG9wID0gZWwuZ2V0QXR0cmlidXRlKFwiZGF0YS1pdGVtXCIpO1xyXG4gICAgICAgICAgICBpZiAobmF2RWxlbWVudEF0dHJpYnV0ZURlc2t0b3AgPT09IG5hdkVsZW1lbnRBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJuYXZfX2xpbmstLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiYnVyZ2VyLW1lbnVfX2J1dHRvbi0taGlkZVwiKTtcclxuICAgICAgICBiYWNrLmNsYXNzTGlzdC5yZW1vdmUoXCJidXJnZXItbWVudV9fYmFjay0taGlkZVwiKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbiIsIndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJvdHRvbVwiKS5zY3JvbGxJbnRvVmlldyh0cnVlKTtcclxufTsiLCJjb25zdCB0ZXJnZXQgPSBkb2N1bWVudFxyXG5cdC5xdWVyeVNlbGVjdG9yKFwiLnB1cnBvc2VfX2JhclwiKVxyXG5cdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXRhcmdldFwiKTtcclxuXHJcbmNvbnN0IGFscmVhZHlIYXZlID0gZG9jdW1lbnRcclxuXHQucXVlcnlTZWxlY3RvcihcIi5wdXJwb3NlX19iYXJcIilcclxuXHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1maWxsXCIpO1xyXG5cclxuY29uc3QgZmlsbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnB1cnBvc2VfX2ZpbGxcIik7XHJcbmNvbnN0IGNvdW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHVycG9zZV9fY291bnRcIik7XHJcblxyXG5jb25zdCBwZXJjZW50YWdlID0gYWxyZWFkeUhhdmUgLyAodGVyZ2V0IC8gMTAwKTtcclxuZmlsbEVsZW1lbnQuc3R5bGUud2lkdGggPSBgJHtwZXJjZW50YWdlfSVgO1xyXG5jb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHthbHJlYWR5SGF2ZX0gLyAke3RlcmdldH1gO1xyXG4iXX0=
